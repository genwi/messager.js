<!doctype html>
<html>
<head>
    <title></title>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="../dist/Messager.min.js"></script>
    <style>
        body{
            margin:5em;
        }
        textarea{
            font-family:Courier;
            height:10em;
        }
    </style>

    <script>
    $(document).ready(function() {
        $('#trigger').click(function() {
            var data = JSON.parse($('#bigData').val());
            Messager.publish($('#bigData').val());
        });

        $('#timerStart').click(function() {
            if(window.interval) {
                clearInterval(window.interval);
            }
            var i=0;
            window.interval = setInterval(function() {
                i++;
                Messager.publish({
                    stuff: i
                });
            }, 800);
        });
        $('#timerStop').click(function() {
           if(window.interval) {
               clearInterval(window.interval);
           } 
        });
        
    
    });

    </script>
</head>
<body>
<h1>Messager.js Publisher</h1>
<fieldset>
    <legend>Publish the JSON below. All subscribers to the Messager will receive the data </legend>
    <textarea id="bigData">
{
    "things": "stuff",
    "foo": ["a", "b", "c", "d"]
}
    </textarea>
    <button id="trigger" class="btn btn-primary">
        Send it!
    </button>

</fieldset>


<fieldset>
    <legend>Realtime Messaging!</legend>
    <button type="submit" class="btn btn-primary" id="timerStart">
        Start Timer
    </button>
    <button type="submit" class="btn btn-primary" id="timerStop">
        Stop Timer
    </button>
</fieldset>
</body>
</html>             